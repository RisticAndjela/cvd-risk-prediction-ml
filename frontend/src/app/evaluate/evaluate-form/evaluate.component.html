<div class="form-container">
  <h2>Model Evaluation</h2>

  <form (ngSubmit)="onSubmit()" #evaluateForm="ngForm">
    <label for="model">Select Model</label>
    <select id="model" [(ngModel)]="model" name="model" (change)="onModelChange()" required>
      <option value="random_forest">Random Forest</option>
      <option value="xgboost">XGBoost</option>
      <option value="logistic_regression">Logistic Regression</option>
    </select>

    <label for="dataset">Select Dataset</label>
    <select id="dataset" [(ngModel)]="dataset" name="dataset" (change)="onDatasetChange()" required>
      <option value="train">Train</option>
      <option value="validation">Validation</option>
      <option value="test">Test</option>
    </select>

    <button type="submit" [disabled]="evaluateForm.invalid">Evaluate</button>
  </form>

  <div *ngIf="metrics" class="result">
    <h3>Evaluation Results ({{ model }} - {{ dataset }})</h3>

    <div class="table-container">
      <table class="metrics-table">
        <thead>
          <tr><th>Metric</th><th>Value</th></tr>
        </thead>
        <tbody>
          <tr><td>Accuracy</td><td>{{ metrics.accuracy | number:'1.3-3' }}</td></tr>
          <tr><td>F1 Score</td><td>{{ metrics.f1_score | number:'1.3-3' }}</td></tr>
          <tr><td>Precision</td><td>{{ metrics.precision | number:'1.3-3' }}</td></tr>
          <tr><td>Recall</td><td>{{ metrics.recall | number:'1.3-3' }}</td></tr>
          <tr><td>ROC AUC</td><td>{{ metrics.roc_auc | number:'1.3-3' }}</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="loader-overlay" *ngIf="isLoading">
  <div class="loader-dialog">
    <div class="spinner"></div>
    <p>Evaluating model, please wait...</p>
  </div>
</div>

<app-dialog
  *ngIf="showDialog"
  [type]="dialogType"
  [title]="dialogTitle"
  [message]="dialogMessage"
  (closed)="onDialogClosed()">
</app-dialog>
